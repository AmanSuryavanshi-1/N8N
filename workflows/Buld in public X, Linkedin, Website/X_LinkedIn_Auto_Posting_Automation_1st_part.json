{
    "nodes": [
      {
        "parameters": {},
        "type": "n8n-nodes-base.manualTrigger",
        "typeVersion": 1,
        "position": [
          -832,
          -576
        ],
        "id": "cb463f58-8e0b-4895-9177-a1411291cd44",
        "name": "When clicking 'Execute workflow'"
      },
      {
        "parameters": {
          "resource": "databasePage",
          "operation": "getAll",
          "databaseId": {
            "__rl": true,
            "value": "21a34bf1-f7e5-8035-b16f-d5ebf63a86a9",
            "mode": "list"
          },
          "returnAll": true,
          "filterType": "manual",
          "filters": {
            "conditions": [
              {
                "key": "Status|select",
                "condition": "equals",
                "selectValue": "Ready to Post"
              }
            ]
          },
          "options": {
            "sort": {
              "sortValue": [
                {
                  "key": "ManualOrder|number",
                  "direction": "ascending"
                },
                {
                  "key": "Priority|select",
                  "direction": "ascending"
                },
                {
                  "timestamp": true,
                  "key": "created_time",
                  "direction": "ascending"
                }
              ]
            }
          }
        },
        "id": "13f4fabb-6e0e-4071-9769-2ab674445c70",
        "name": "Notion â€“ Get Ready Content",
        "type": "n8n-nodes-base.notion",
        "typeVersion": 2,
        "position": [
          -608,
          -576
        ],
        "credentials": {
          "notionApi": {
            "id": "je8hKPK6RzYSk4JA",
            "name": "Notion account 2"
          }
        }
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true
            },
            "conditions": [
              {
                "leftValue": "={{ $input.all().length > 0 }}",
                "rightValue": true,
                "operator": {
                  "type": "boolean",
                  "operation": "equals"
                }
              }
            ]
          },
          "options": {}
        },
        "id": "d491a456-1d07-488d-b003-df69b629ef3e",
        "name": "Filter â€“ Has Content",
        "type": "n8n-nodes-base.if",
        "typeVersion": 2,
        "position": [
          -384,
          -576
        ]
      },
      {
        "parameters": {
          "jsCode": "// CONTENT SELECTION & PROFILE SETUP\nconst items = $input.all();\n\nif (!items || items.length === 0) {\nÂ  console.log('âŒ No content ready for processing');\nÂ  return [];\n}\n\n// Get first item (priority + FIFO)\nconst item = items[0].json;\nconsole.log('ğŸ¯ Processing item:', item.id);\n\n// Enhanced property extraction with fallbacks\nconst getProperty = (obj, path, defaultValue = '') => {\nÂ  const keys = path.split('.');\nÂ  let result = obj;\nÂ  for (const key of keys) {\nÂ  Â  if (result && typeof result === 'object' && key in result) {\nÂ  Â  Â  result = result[key];\nÂ  Â  } else {\nÂ  Â  Â  return defaultValue;\nÂ  Â  }\nÂ  }\nÂ  return result || defaultValue;\n};\n\nconst title = getProperty(item, 'properties.Content Pages.title.0.plain_text') || \nÂ  Â  Â  Â  Â  Â  Â  getProperty(item, 'properties.title.title.0.plain_text') ||\nÂ  Â  Â  Â  Â  Â  Â  getProperty(item, 'properties.Name.title.0.plain_text') ||\nÂ  Â  Â  Â  Â  Â  Â  getProperty(item, 'name') || \nÂ  Â  Â  Â  Â  Â  Â  'Untitled Content';\n\nconst category = getProperty(item, 'properties.Category.select.name') || \nÂ  Â  Â  Â  Â  Â  Â  Â  Â 'Learning';\n\nconst priority = getProperty(item, 'properties.Priority.select.name') || \nÂ  Â  Â  Â  Â  Â  Â  Â  Â 'normal';\n\n// Complete user profile for authentic content\nconst userProfile = {\nÂ  name: 'Aman Surya',\nÂ  role: 'Fresh CS Graduate & AI/ML Enthusiast',\nÂ  focus: 'Building with Next.js/React/n8n, seeking AI PM roles',\nÂ  personality: 'Authentic, curious, growth-minded, detail-oriented',\nÂ  expertise: ['JavaScript', 'React', 'Next.js', 'n8n', 'AI/ML', 'Automation', 'Product Management'],\nÂ  audience: 'Tech community, AI enthusiasts, developers, PM aspirants',\nÂ  timezone: 'Asia/Kolkata',\nÂ  writing_style: {\nÂ  Â  twitter: 'Casual, engaging, thread-friendly, question-driven, community-focused',\nÂ  Â  linkedin: 'Professional, detailed, story-driven, insight-rich, career-focused'\nÂ  },\nÂ  content_goals: {\nÂ  Â  primary: 'Build technical credibility for AI PM roles',\nÂ  Â  secondary: 'Help fellow developers learn and grow',\nÂ  Â  engagement: 'Create genuine discussions and valuable connections'\nÂ  }\n};\n\nconst sessionId = `session_${Date.now()}_${(item.id || '').toString().substring(0, 8)}`;\n\nreturn [{\nÂ  json: {\nÂ  Â  id: item.id,\nÂ  Â  title: title,\nÂ  Â  category: category,\nÂ  Â  priority: priority,\nÂ  Â  sessionId: sessionId,\nÂ  Â  userProfile: userProfile,\nÂ  Â  processingStartTime: new Date().toISOString(),\nÂ  Â  remainingItems: items.length - 1,\nÂ  Â  originalId: item.id\nÂ  }\n}];"
        },
        "id": "92728868-1a4d-4fae-82cd-2f34f7311b1a",
        "name": "Code â€“ Select Content & Profile",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -160,
          -576
        ]
      },
      {
        "parameters": {
          "resource": "databasePage",
          "operation": "update",
          "pageId": {
            "__rl": true,
            "value": "={{ $json.id }}",
            "mode": "id"
          },
          "propertiesUi": {
            "propertyValues": [
              {
                "key": "Status|select",
                "type": "select",
                "selectValue": "Processing"
              },
              {
                "key": "SessionID|rich_text",
                "richText": true,
                "text": {
                  "text": [
                    {
                      "text": "={{ $json.sessionId }}",
                      "annotationUi": {}
                    }
                  ]
                }
              },
              {
                "key": "Processing Started|date",
                "type": "date",
                "date": "={{ $json.processingStartTime }}"
              },
              {
                "key": "Notes|rich_text",
                "richText": true,
                "text": {
                  "text": [
                    {
                      "text": "=ğŸ”„ Processing started\\nSession: {{ $json.sessionId }}\\nPriority: {{ $json.priority }}\\nCategory: {{ $json.category }}\\nStarted: {{ new Date().toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'}) }} IST",
                      "annotationUi": {}
                    }
                  ]
                }
              }
            ]
          },
          "options": {}
        },
        "id": "9e38576b-fb53-4685-ad41-22df9dd4dbed",
        "name": "Notion â€“ Update to Processing",
        "type": "n8n-nodes-base.notion",
        "typeVersion": 2,
        "position": [
          64,
          -576
        ],
        "credentials": {
          "notionApi": {
            "id": "je8hKPK6RzYSk4JA",
            "name": "Notion account 2"
          }
        }
      },
      {
        "parameters": {
          "resource": "block",
          "operation": "getAll",
          "blockId": {
            "__rl": true,
            "value": "={{ $json.id }}",
            "mode": "id"
          },
          "returnAll": true,
          "fetchNestedBlocks": true,
          "simplifyOutput": false
        },
        "id": "11de4a06-52fc-4b10-9b5b-0823c49a5e91",
        "name": "Notion â€“ Extract All Blocks",
        "type": "n8n-nodes-base.notion",
        "typeVersion": 2.2,
        "position": [
          288,
          -576
        ],
        "credentials": {
          "notionApi": {
            "id": "je8hKPK6RzYSk4JA",
            "name": "Notion account 2"
          }
        }
      },
      {
        "parameters": {
          "jsCode": "// COMPREHENSIVE CONTENT EXTRACTION WITH IMAGE PROCESSING\ntry {\nÂ  console.log('ğŸ” Starting comprehensive content extraction...');\nÂ  \nÂ  const extractItems = $items('Notion â€“ Extract All Blocks');\nÂ  if (!extractItems?.length) {\nÂ  Â  throw new Error('No blocks from Notion â€“ Extract All Blocks');\nÂ  }\nÂ  console.log(`ğŸ“¥ Processing ${extractItems.length} block items`);\nÂ  \nÂ  const allBlocks = extractItems.map(item => item.json);\nÂ  const blockMap = new Map();\nÂ  const topLevelBlocks = [];\nÂ  \nÂ  // Build hierarchical tree including ALL block types\nÂ  allBlocks.forEach(block => {\nÂ  Â  blockMap.set(block.id, { ...block, children: [] });\nÂ  });\nÂ  \nÂ  allBlocks.forEach(block => {\nÂ  Â  if (block.parent?.type === 'page_id') {\nÂ  Â  Â  topLevelBlocks.push(blockMap.get(block.id));\nÂ  Â  } else if (block.parent?.type === 'block_id') {\nÂ  Â  Â  const parent = blockMap.get(block.parent.block_id);\nÂ  Â  Â  if (parent) {\nÂ  Â  Â  Â  parent.children.push(blockMap.get(block.id));\nÂ  Â  Â  }\nÂ  Â  }\nÂ  });\nÂ  \nÂ  console.log(`ğŸŒ³ Built tree with ${topLevelBlocks.length} top-level blocks`);\nÂ  \nÂ  // Enhanced text extraction\nÂ  const extractText = (richTextArray) => {\nÂ  Â  if (!Array.isArray(richTextArray)) return '';\nÂ  Â  return richTextArray\nÂ  Â  Â  .map(item => item.plain_text || item.text?.content || '')\nÂ  Â  Â  .join('')\nÂ  Â  Â  .trim();\nÂ  };\nÂ  \nÂ  // Process images for social media\nÂ  const processImage = (url, caption = '') => {\nÂ  Â  if (!url) return null;\nÂ  Â  try {\nÂ  Â  Â  // Clean AWS URLs but keep functionality\nÂ  Â  Â  const urlObj = new URL(url);\nÂ  Â  Â  return {\nÂ  Â  Â  Â  url: url, // Keep full URL for access\nÂ  Â  Â  Â  caption: caption,\nÂ  Â  Â  Â  alt_text: caption || 'Content image',\nÂ  Â  Â  Â  processing_needed: true\nÂ  Â  Â  };\nÂ  Â  } catch {\nÂ  Â  Â  return null;\nÂ  Â  }\nÂ  };\nÂ  \nÂ  // Recursive content renderer - PRESERVE ALL CONTENT\nÂ  function renderBlock(block, level = 0) {\nÂ  Â  if (!block?.type) return { text: '', sections: [], images: [] };\nÂ  Â  \nÂ  Â  const indent = 'Â  '.repeat(level);\nÂ  Â  const blockData = block[block.type] || {};\nÂ  Â  let content = '';\nÂ  Â  let sections = [];\nÂ  Â  let images = [];\nÂ  Â  let text = extractText(blockData?.rich_text || blockData?.text || []);\nÂ  Â  \nÂ  Â  switch (block.type) {\nÂ  Â  Â  case 'heading_1':\nÂ  Â  Â  Â  content = `\\n# ${text}\\n\\n`;\nÂ  Â  Â  Â  if (text) sections.push({ level: 1, title: text, content: '', id: block.id });\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'heading_2':\nÂ  Â  Â  Â  content = `\\n## ${text}\\n\\n`;\nÂ  Â  Â  Â  if (text) sections.push({ level: 2, title: text, content: '', id: block.id });\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'heading_3':\nÂ  Â  Â  Â  content = `\\n### ${text}\\n\\n`;\nÂ  Â  Â  Â  if (text) sections.push({ level: 3, title: text, content: '', id: block.id });\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'paragraph':\nÂ  Â  Â  Â  if (text) content = `${text}\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'bulleted_list_item':\nÂ  Â  Â  Â  if (text) content = `${indent}- ${text}\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'numbered_list_item':\nÂ  Â  Â  Â  if (text) content = `${indent}1. ${text}\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'toggle':\nÂ  Â  Â  Â  if (text) {\nÂ  Â  Â  Â  Â  content = `\\nâ–¶ï¸ ${text}\\n`;\nÂ  Â  Â  Â  Â  // Mark as important section\nÂ  Â  Â  Â  Â  sections.push({ level: 4, title: text, content: '', id: block.id, type: 'toggle' });\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'callout':\nÂ  Â  Â  Â  const icon = blockData?.icon?.emoji || 'ğŸ’¡';\nÂ  Â  Â  Â  if (text) content = `\\n${icon} **${text}**\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'quote':\nÂ  Â  Â  Â  if (text) content = `\\n> ${text}\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'code':\nÂ  Â  Â  Â  const language = blockData?.language || 'text';\nÂ  Â  Â  Â  if (text) {\nÂ  Â  Â  Â  Â  content = `\\n\\`\\`\\`${language}\\n${text}\\n\\`\\`\\`\\n\\n`;\nÂ  Â  Â  Â  Â  sections.push({ level: 5, title: `Code: ${language}`, content: text, id: block.id, type: 'code' });\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'divider':\nÂ  Â  Â  Â  content = '\\n---\\n\\n';\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'image':\nÂ  Â  Â  Â  const imageUrl = blockData?.file?.url || blockData?.external?.url;\nÂ  Â  Â  Â  if (imageUrl) {\nÂ  Â  Â  Â  Â  const processedImage = processImage(imageUrl, text);\nÂ  Â  Â  Â  Â  if (processedImage) {\nÂ  Â  Â  Â  Â  Â  images.push(processedImage);\nÂ  Â  Â  Â  Â  Â  content = `\\n[ğŸ“¸ Image: ${text || 'Visual content'}]\\n\\n`;\nÂ  Â  Â  Â  Â  }\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'video':\nÂ  Â  Â  Â  content = `\\n[ğŸ¥ Video: ${text || 'Video content'}]\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'audio':\nÂ  Â  Â  Â  content = `\\n[ğŸµ Audio: ${text || 'Audio content'}]\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'file':\nÂ  Â  Â  Â  content = `\\n[ğŸ“„ File: ${text || 'Attached file'}]\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'bookmark':\nÂ  Â  Â  Â  const bookmarkUrl = blockData?.url || '';\nÂ  Â  Â  Â  if (bookmarkUrl) content = `\\n[ğŸ”— ${text || bookmarkUrl}](${bookmarkUrl})\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'equation':\nÂ  Â  Â  Â  if (text) content = `\\n$$${text}$$\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  Â  case 'table_of_contents':\nÂ  Â  Â  Â  content = '\\n[ğŸ“‹ Table of Contents]\\n\\n';\nÂ  Â  Â  Â  break;\nÂ  Â  Â  default:\nÂ  Â  Â  Â  if (text) content = `${indent}${text}\\n\\n`;\nÂ  Â  Â  Â  break;\nÂ  Â  }\nÂ  Â  \nÂ  Â  // Process children recursively - CRITICAL FOR TOGGLES\nÂ  Â  if (block.children?.length) {\nÂ  Â  Â  const childrenResult = block.children\nÂ  Â  Â  Â  .map(child => renderBlock(child, level + 1))\nÂ  Â  Â  Â  .reduce((acc, result) => {\nÂ  Â  Â  Â  Â  acc.text += result.text;\nÂ  Â  Â  Â  Â  acc.sections = acc.sections.concat(result.sections);\nÂ  Â  Â  Â  Â  acc.images = acc.images.concat(result.images);\nÂ  Â  Â  Â  Â  return acc;\nÂ  Â  Â  Â  }, { text: '', sections: [], images: [] });\nÂ  Â  Â  \nÂ  Â  Â  content += childrenResult.text;\nÂ  Â  Â  sections = sections.concat(childrenResult.sections);\nÂ  Â  Â  images = images.concat(childrenResult.images);\nÂ  Â  }\nÂ  Â  \nÂ  Â  return { text: content, sections: sections, images: images };\nÂ  }\nÂ  \nÂ  // Process all blocks\nÂ  const result = topLevelBlocks\nÂ  Â  .map(block => renderBlock(block))\nÂ  Â  .reduce((acc, blockResult) => {\nÂ  Â  Â  acc.text += blockResult.text;\nÂ  Â  Â  acc.sections = acc.sections.concat(blockResult.sections);\nÂ  Â  Â  acc.images = acc.images.concat(blockResult.images);\nÂ  Â  Â  return acc;\nÂ  Â  }, { text: '', sections: [], images: [] });\nÂ  \nÂ  // Clean up text while preserving structure\nÂ  let fullText = result.text\nÂ  Â  .replace(/\\n{3,}/g, '\\n\\n')\nÂ  Â  .replace(/\\s+$/gm, '') // Remove trailing spaces\nÂ  Â  .trim();\nÂ  \nÂ  const stats = {\nÂ  Â  totalBlocks: allBlocks.length,\nÂ  Â  processedBlocks: topLevelBlocks.length,\nÂ  Â  characterCount: fullText.length,\nÂ  Â  wordCount: fullText.split(/\\s+/).filter(w => w.length > 0).length,\nÂ  Â  sections: result.sections.length,\nÂ  Â  images: result.images.length,\nÂ  Â  toggleSections: result.sections.filter(s => s.type === 'toggle').length,\nÂ  Â  codeSections: result.sections.filter(s => s.type === 'code').length\nÂ  };\nÂ  \nÂ  console.log('âœ… Content extraction complete:', stats);\nÂ  \nÂ  return [{\nÂ  Â  json: {\nÂ  Â  Â  fullText: fullText,\nÂ  Â  Â  sections: result.sections,\nÂ  Â  Â  images: result.images,\nÂ  Â  Â  extractionStats: stats,\nÂ  Â  Â  contentMetadata: {\nÂ  Â  Â  Â  totalSections: result.sections.length,\nÂ  Â  Â  Â  hasImages: result.images.length > 0,\nÂ  Â  Â  Â  hasCode: result.sections.some(s => s.type === 'code'),\nÂ  Â  Â  Â  hasToggles: result.sections.some(s => s.type === 'toggle'),\nÂ  Â  Â  Â  hasLists: fullText.includes('- ') || /^\\d+\\.\\s/m.test(fullText),\nÂ  Â  Â  Â  complexity: stats.wordCount > 800 ? 'high' : stats.wordCount > 400 ? 'medium' : 'low'\nÂ  Â  Â  }\nÂ  Â  }\nÂ  }];\nÂ  \n} catch (error) {\nÂ  console.error('âŒ Content extraction failed:', error.message);\nÂ  return [{\nÂ  Â  json: {\nÂ  Â  Â  fullText: `Content extraction error: ${error.message}`,\nÂ  Â  Â  sections: [],\nÂ  Â  Â  images: [],\nÂ  Â  Â  extractionStats: { error: true },\nÂ  Â  Â  contentMetadata: { error: error.message }\nÂ  Â  }\nÂ  }];\n}"
        },
        "id": "1fe1752d-836d-463c-923f-69d239b87157",
        "name": "Code â€“ Extract & Process Content",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          512,
          -576
        ]
      },
      {
        "parameters": {
          "messages": {
            "message": [
              {
                "content": "=You are a business development specialist for full-stack automation developers. Research Twitter and LinkedIn strategies that attract high-paying clients and premium job opportunities for developers who specialize in NextJS + automation + API integrations. Focus on Indian market (Delhi/NCR) + global remote opportunities targeting small businesses, startups, agencies, and enterprises.",
                "role": "system"
              },
              {
                "content": "=Research client acquisition and job opportunity strategies for:\n\n**PROFESSIONAL PROFILE:**\n- Expert: Full-stack automation developer (Frontend + Automation + API Integration)\n- Skills: NextJS, n8n, Python, JavaScript, SEO optimization, Lighthouse performance\n- Services: Custom websites, automation systems, API integrations, business process optimization\n- Location: Delhi/NCR + Global remote\n- Target Clients: Small businesses, startups, agencies, enterprises needing automation\n- Goals: Gigs â†’ Job offers â†’ Audience building â†’ Revenue generation\n\n**CONTENT CONTEXT:**\n- Category: {{ $('Code â€“ Select Content & Profile').first().json.category }}\n- Title: {{ $('Code â€“ Select Content & Profile').first().json.title }}\n- Content Mix: Technical tutorials (30%), Project showcases (20%), System insights (20%), Learning docs (30%)\n\n**RESEARCH OBJECTIVES:**\n1. Hashtags that attract automation clients and technical hiring managers\n2. Optimal posting times for reaching business decision makers in Indian + global markets\n3. Engagement strategies for showcasing technical expertise with business results\n4. Content approaches that generate leads and job inquiries\n\n**RETURN EXACTLY THIS JSON:**\n{\n  \"trending_hashtags\": {\n    \"twitter\": [\"#NextJS\", \"#Automation\", \"#n8n\", \"#WebDevelopment\", \"#BusinessAutomation\", \"#APIIntegration\", \"#BuildInPublic\"],\n    \"linkedin\": [\"#FullStackDevelopment\", \"#ProcessAutomation\", \"#NextJSDeveloper\", \"#BusinessEfficiency\", \"#TechnicalConsulting\", \"#WebsiteDevelopment\", \"#AutomationSpecialist\", \"#APIIntegration\", \"#DelhiTech\"]\n  },\n  \"optimal_times\": {\n    \"twitter_ist\": \"Business hours: 9:00-11:00 AM, 2:00-4:00 PM IST for Indian clients; 7:00-9:00 PM IST for global reach\",\n    \"linkedin_ist\": \"Peak B2B engagement: 9:00-11:00 AM, 3:00-5:00 PM IST Tuesday-Thursday; 8:00-10:00 AM for international clients\"\n  },\n  \"engagement_strategies\": {\n    \"twitter\": \"Share automation wins with metrics, showcase website performance improvements, offer free technical audits, engage with startup founders and agency owners, demonstrate API integration solutions\",\n    \"linkedin\": \"Post detailed case studies with ROI metrics, share technical insights with business impact, showcase website performance achievements, engage with CTOs and business owners, offer process automation consultations\"\n  }\n}"
              }
            ]
          },
          "options": {
            "maxTokens": 1500,
            "temperature": 0.3
          },
          "requestOptions": {}
        },
        "id": "73f19463-8206-43ad-82b1-b4ba53a9c5d7",
        "name": "Perplexity â€“ Research Hashtags & Timing",
        "type": "n8n-nodes-base.perplexity",
        "typeVersion": 1,
        "position": [
          736,
          -672
        ],
        "credentials": {
          "perplexityApi": {
            "id": "Ss20gojfOfH1gtj7",
            "name": "Perplexity Anki"
          }
        }
      },
      {
        "parameters": {
          "messages": {
            "message": [
              {
                "content": "=You are a competitive intelligence analyst for full-stack automation developers targeting Indian and global markets. Research successful positioning strategies used by developers who attract premium clients and job offers through technical expertise combined with business results. Focus on NextJS developers, automation specialists, and technical consultants.",
                "role": "system"
              },
              {
                "content": "=Analyze market positioning strategies for full-stack automation developers:\n\n**COMPETITIVE LANDSCAPE:**\n- Target Market: Small businesses, startups, agencies, enterprises (Delhi/NCR + Global remote)\n- Service Portfolio: NextJS development, automation systems, API integrations, performance optimization\n- Content Strategy: {{ $('Code â€“ Select Content & Profile').first().json.category }} content about {{ $('Code â€“ Select Content & Profile').first().json.title }}\n- Revenue Goals: Client projects â†’ Job offers â†’ Audience monetization\n\n**ANALYSIS REQUIREMENTS:**\n1. How successful NextJS + automation developers position their services\n2. Content strategies that attract high-value clients and job opportunities  \n3. Market positioning approaches that work for Indian developers in global markets\n4. Successful formats for showcasing technical expertise with business impact\n\n**RETURN EXACTLY THIS JSON:**\n{\n  \"content_themes\": [\"Website performance case studies with Lighthouse scores\", \"Automation ROI breakdowns with specific metrics\", \"NextJS project showcases with business impact\", \"API integration solutions for common business problems\", \"Before/after process improvement stories\", \"Technical deep-dives with cost-saving insights\"],\n  \"engagement_patterns\": [\"Share specific performance metrics and improvements\", \"Demonstrate problem-solving methodology\", \"Show technical depth with clear business benefits\", \"Offer free website audits and automation assessments\", \"Document client success stories with numbers\", \"Connect technical solutions to revenue/efficiency gains\"],\n  \"successful_formats\": {\n    \"twitter\": [\"Performance improvement threads with screenshots\", \"Automation result threads with time/cost savings\", \"Technical tip threads solving real problems\", \"Project showcase threads with metrics\", \"Free audit offer threads\"],\n    \"linkedin\": [\"Detailed case studies with performance data\", \"Technical deep-dives showing business ROI\", \"Project breakdowns with client results\", \"Industry-specific automation solutions\", \"Website performance optimization insights\"]\n  },\n  \"competitor_insights\": [\"Technical expertise + proven results = premium positioning\", \"Lighthouse scores and performance metrics build immediate credibility\", \"Free audits and assessments generate qualified leads\", \"Specific client success stories with metrics outperform generic content\", \"Combining frontend excellence with automation positions as full-solution provider\"]\n}"
              }
            ]
          },
          "options": {
            "maxTokens": 1500,
            "temperature": 0.3
          },
          "requestOptions": {}
        },
        "id": "ce5dd4a3-21b4-4bf6-bc5b-786bffd6ef54",
        "name": "Perplexity â€“ Research Competitors & Themes",
        "type": "n8n-nodes-base.perplexity",
        "typeVersion": 1,
        "position": [
          736,
          -480
        ],
        "credentials": {
          "perplexityApi": {
            "id": "Ss20gojfOfH1gtj7",
            "name": "Perplexity Anki"
          }
        }
      },
      {
        "parameters": {
          "jsCode": "// STRATEGY ANALYSIS & CONTEXT BUILDING\nconst contentData = $('Code â€“ Select Content & Profile').first().json;\nconst extractedContent = $('Code â€“ Extract & Process Content').first().json;\nconst hashtagData = $('Perplexity â€“ Research Hashtags & Timing').first().json || {};\nconst competitorData = $('Perplexity â€“ Research Competitors & Themes').first().json || {};\n\nconsole.log('ğŸ§  Building comprehensive content strategy...');\n\n// Parse research data with fallbacks\nlet hashtagsAndTiming = { trending_hashtags: { twitter: [], linkedin: [] }, optimal_times: {}, engagement_strategies: {} };\nlet competitorInsights = { content_themes: [], engagement_patterns: [], successful_formats: { twitter: [], linkedin: [] }, competitor_insights: [] };\n\n// Process hashtag research\ntry {\nÂ  const hashtagResponse = hashtagData.choices?.[0]?.message?.content || JSON.stringify(hashtagData);\nÂ  const hashtagJson = hashtagResponse.match(/\\{[\\s\\S]*\\}/);\nÂ  if (hashtagJson) {\nÂ  Â  hashtagsAndTiming = { ...hashtagsAndTiming, ...JSON.parse(hashtagJson[0]) };\nÂ  }\n} catch (e) {\nÂ  console.log('Using fallback hashtags:', e.message);\nÂ  hashtagsAndTiming = {\nÂ  Â  trending_hashtags: {\nÂ  Â  Â  twitter: ['#BuildInPublic', '#LearningInPublic', '#AI', '#TechCommunity', '#IndianTech'],\nÂ  Â  Â  linkedin: ['#ArtificialIntelligence', '#MachineLearning', '#TechCareers', '#BuildInPublic', '#IndianTechCommunity']\nÂ  Â  },\nÂ  Â  optimal_times: {\nÂ  Â  Â  twitter_ist: '8:00-10:00 AM, 7:00-9:00 PM',\nÂ  Â  Â  linkedin_ist: '9:00-11:00 AM, 3:00-5:00 PM'\nÂ  Â  },\nÂ  Â  engagement_strategies: {\nÂ  Â  Â  twitter: 'Thread-based storytelling with community questions',\nÂ  Â  Â  linkedin: 'Professional insights with career relevance'\nÂ  Â  }\nÂ  };\n}\n\n// Process competitor research\ntry {\nÂ  const competitorResponse = competitorData.choices?.[0]?.message?.content || JSON.stringify(competitorData);\nÂ  const competitorJson = competitorResponse.match(/\\{[\\s\\S]*\\}/);\nÂ  if (competitorJson) {\nÂ  Â  competitorInsights = { ...competitorInsights, ...JSON.parse(competitorJson[0]) };\nÂ  }\n} catch (e) {\nÂ  console.log('Using fallback competitor insights:', e.message);\nÂ  competitorInsights = {\nÂ  Â  content_themes: ['Technical tutorials', 'Career insights', 'Project breakdowns'],\nÂ  Â  engagement_patterns: ['Ask questions', 'Share failures', 'Show progress'],\nÂ  Â  successful_formats: {\nÂ  Â  Â  twitter: ['Thread stories', 'Quick tips', 'Progress updates'],\nÂ  Â  Â  linkedin: ['Detailed case studies', 'Career learnings', 'Technical deep-dives']\nÂ  Â  },\nÂ  Â  competitor_insights: ['Build in public resonates', 'Personal stories drive engagement', 'Technical depth builds credibility']\nÂ  };\n}\n\n// Analyze content characteristics\nconst stats = extractedContent.extractionStats;\nconst wordCount = stats.wordCount || 0;\nconst sections = extractedContent.sections || [];\nconst images = extractedContent.images || [];\nconst metadata = extractedContent.contentMetadata || {};\n\nconsole.log(`ğŸ“Š Content analysis: ${wordCount} words, ${sections.length} sections, ${images.length} images`);\n\n// INTELLIGENT CONTENT STRATEGY\nfunction createContentStrategy(wordCount, sections, images, complexity) {\nÂ  const strategy = {\nÂ  Â  totalPosts: 0,\nÂ  Â  twitter: { threads: [] },\nÂ  Â  linkedin: { posts: [] },\nÂ  Â  timing: {\nÂ  Â  Â  immediate: [],\nÂ  Â  Â  delayed_30sec: [],\nÂ  Â  Â  delayed_60sec: [],\nÂ  Â  Â  delayed_90sec: [],\nÂ  Â  Â  delayed_120sec: []\nÂ  Â  }\nÂ  };\nÂ  \nÂ  // Twitter Strategy\nÂ  if (wordCount <= 200) {\nÂ  Â  // Single thread\nÂ  Â  strategy.twitter.threads.push({\nÂ  Â  Â  id: 1,\nÂ  Â  Â  type: 'single_thread',\nÂ  Â  Â  priority: 'immediate',\nÂ  Â  Â  estimated_tweets: 3,\nÂ  Â  Â  focus: 'key_insights'\nÂ  Â  });\nÂ  } else if (wordCount <= 600) {\nÂ  Â  // Two threads\nÂ  Â  strategy.twitter.threads.push({\nÂ  Â  Â  id: 1,\nÂ  Â  Â  type: 'overview_thread',\nÂ  Â  Â  priority: 'immediate',\nÂ  Â  Â  estimated_tweets: 4,\nÂ  Â  Â  focus: 'main_concepts'\nÂ  Â  });\nÂ  Â  strategy.twitter.threads.push({\nÂ  Â  Â  id: 2,\nÂ  Â  Â  type: 'detail_thread',\nÂ  Â  Â  priority: 'delayed_30sec',\nÂ  Â  Â  estimated_tweets: 3,\nÂ  Â  Â  focus: 'implementation_details'\nÂ  Â  });\nÂ  } else {\nÂ  Â  // Multiple threads for large content\nÂ  Â  const threadCount = Math.min(3, Math.ceil(sections.length / 2));\nÂ  Â  for (let i = 0; i < threadCount; i++) {\nÂ  Â  Â  const delays = ['immediate', 'delayed_30sec', 'delayed_60sec'];\nÂ  Â  Â  strategy.twitter.threads.push({\nÂ  Â  Â  Â  id: i + 1,\nÂ  Â  Â  Â  type: i === 0 ? 'introduction_thread' : `content_thread_${i}`,\nÂ  Â  Â  Â  priority: delays[i] || 'delayed_90sec',\nÂ  Â  Â  Â  estimated_tweets: i === 0 ? 4 : 3,\nÂ  Â  Â  Â  focus: i === 0 ? 'overview' : `section_${i}`,\nÂ  Â  Â  Â  sections: sections.slice(i * 2, (i + 1) * 2)\nÂ  Â  Â  });\nÂ  Â  }\nÂ  }\nÂ  \nÂ  // LinkedIn Strategy\nÂ  if (wordCount <= 800) {\nÂ  Â  strategy.linkedin.posts.push({\nÂ  Â  Â  id: 1,\nÂ  Â  Â  type: 'comprehensive_post',\nÂ  Â  Â  priority: 'delayed_90sec',\nÂ  Â  Â  estimated_length: Math.min(2500, wordCount * 3),\nÂ  Â  Â  focus: 'complete_story'\nÂ  Â  });\nÂ  } else {\nÂ  Â  strategy.linkedin.posts.push({\nÂ  Â  Â  id: 1,\nÂ  Â  Â  type: 'overview_post',\nÂ  Â  Â  priority: 'delayed_60sec',\nÂ  Â  Â  estimated_length: 2000,\nÂ  Â  Â  focus: 'key_insights'\nÂ  Â  });\nÂ  Â  strategy.linkedin.posts.push({\nÂ  Â  Â  id: 2,\nÂ  Â  Â  type: 'detailed_post',\nÂ  Â  Â  priority: 'delayed_120sec',\nÂ  Â  Â  estimated_length: 2500,\nÂ  Â  Â  focus: 'technical_deep_dive'\nÂ  Â  });\nÂ  }\nÂ  \nÂ  strategy.totalPosts = strategy.twitter.threads.length + strategy.linkedin.posts.length;\nÂ  return strategy;\n}\n\nconst contentStrategy = createContentStrategy(wordCount, sections, images, metadata.complexity);\n\n// Build comprehensive context\nconst masterContext = {\nÂ  // Core identifiers\nÂ  sessionId: contentData.sessionId,\nÂ  originalId: contentData.originalId,\nÂ  \nÂ  // Content basics\nÂ  title: contentData.title,\nÂ  category: contentData.category,\nÂ  priority: contentData.priority,\nÂ  \nÂ  // User context\nÂ  userProfile: contentData.userProfile,\nÂ  \nÂ  // Content analysis\nÂ  contentAnalysis: {\nÂ  Â  wordCount,\nÂ  Â  characterCount: stats.characterCount,\nÂ  Â  sections: sections.length,\nÂ  Â  images: images.length,\nÂ  Â  hasCode: metadata.hasCode,\nÂ  Â  hasToggles: metadata.hasToggles,\nÂ  Â  complexity: metadata.complexity\nÂ  },\nÂ  \nÂ  // Source content\nÂ  sourceContent: {\nÂ  Â  fullText: extractedContent.fullText,\nÂ  Â  sections: sections,\nÂ  Â  images: images\nÂ  },\nÂ  \nÂ  // Strategy\nÂ  contentStrategy: contentStrategy,\nÂ  \nÂ  // Research insights\nÂ  researchData: {\nÂ  Â  hashtagsAndTiming: hashtagsAndTiming,\nÂ  Â  competitorInsights: competitorInsights\nÂ  },\nÂ  \nÂ  // Processing metadata\nÂ  processingTime: new Date().toISOString()\n};\n\nconsole.log(`âœ… Strategy created:`);\nconsole.log(`ğŸ“± Twitter: ${contentStrategy.twitter.threads.length} threads`);\nconsole.log(`ğŸ’¼ LinkedIn: ${contentStrategy.linkedin.posts.length} posts`);\nconsole.log(`ğŸ–¼ï¸ Images: ${images.length}`);\n\nreturn [{ json: masterContext }];"
        },
        "id": "608cd532-ccf5-4aba-b6d5-67c8a6fa1e9d",
        "name": "Code â€“ Build Strategy & Context",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          1184,
          -576
        ]
      },
      {
        "parameters": {
          "modelId": {
            "__rl": true,
            "value": "models/gemini-flash-lite-latest",
            "mode": "list",
            "cachedResultName": "models/gemini-flash-lite-latest"
          },
          "messages": {
            "values": [
              {
                "content": "=You are Aman Suryavanshiâ€™s personal brand strategist for building a premium full-stack automation consultancy. Create Twitter threads that showcase his technical expertise while attracting high-value clients and job opportunities.\n\nPROFESSIONAL IDENTITY:\n\nName: Aman Suryavanshi\n\nTitle: Full-Stack Automation Developer & Technical Product Coordinator\n\nExpertise: NextJS Websites (SEO & Lighthouse-optimized) + n8n Automations + API Integrations\n\nPortfolio Example: https://github.com/AmanSuryavanshi-1/Aviators_Training_Centre\n\nLocation: Delhi/NCR + Global remote\n\nValue Proposition: â€œI build fast, SEO-optimized NextJS sites AND automate business processes end-to-end.â€\n\nTarget Audience: Small businesses, startups, agencies, enterprises, technical hiring managers\n\nBUSINESS OBJECTIVES:\n\nGenerate client inquiries for website + automation projects\n\nAttract AI PM / Automation Specialist job offers (remote + Delhi/NCR)\n\nBuild audience and followers for long-term revenue\n\nCONTENT TRANSFORMATION CONTEXT:\n\nSource: {{ $json.title }} ({{ $json.category }})\n\nAnalysis: {{ $json.contentAnalysis.wordCount }} words, {{ $json.contentAnalysis.sections }} sections\n\nImages Available: {{ $json.contentAnalysis.images }}\n\nMARKET INTELLIGENCE:\n\nClient-Attracting Hashtags: {{ $json.researchData.hashtagsAndTiming.trending_hashtags.twitter.join(', ') }}\n\nEngagement Strategy: {{ $json.researchData.hashtagsAndTiming.engagement_strategies.twitter }}\n\nCompetitor Patterns: {{ $json.researchData.competitorInsights.engagement_patterns.join('; ') }}\n\nSOURCE CONTENT:\n{{ $json.sourceContent.fullText }}\n\nCLIENT ACQUISITION REQUIREMENTS:\n\nâ‰¤275 characters per tweet (strictly enforce)\n\nDemonstrate business-impact by showing performance metrics (Lighthouse, load times)\n\nFrame insights as â€œhereâ€™s how I helped businesses succeedâ€\n\nPosition as expert consultant, not just learner\n\nSubtle CTA: invite clients to connect for automation audits\n\nUse 2â€“3 strategic hashtags each tweet\n\nCONTENT TRANSFORMATION STRATEGY:\n\nâ€œHereâ€™s how I optimized a NextJS site to 98 Lighthouse score in 0.8sâ€\n\nâ€œThe automation that saved my client $5K/mo using n8nâ€\n\nâ€œCase study: built a workflow that processed 10K records in 2 minutesâ€\n\nâ€œTop performance mistakes 90% of sites makeâ€”and how to fix themâ€\n\nPROFESSIONAL VOICE EXAMPLES:\n\nâ€œJust boosted a clientâ€™s Lighthouse score from 47 to 97. Load time fell from 4.2s to 1.1s. Hereâ€™s the exact strategy I usedâ€¦ ğŸ§µâ€\n\nâ€œMost businesses waste 20+ hrs/week on manual tasks. I automated their workflow in n8nâ€”ROI: 400% in month 1. Hereâ€™s howâ€¦ ğŸ§µâ€\n\n**RETURN EXACTLY THIS JSON:**\n{\n  \"twitter_threads\": [\n    {\n      \"thread_id\": 1,\n      \"priority\": \"immediate\",\n      \"theme\": \"business value and technical expertise focus\",\n      \"tweets\": [\n        {\n          \"position\": 1,\n          \"content\": \"ğŸ§µ Just delivered a NextJS site with 98 Lighthouse score that loads in 0.8s. Here's the optimization strategy...\",\n          \"char_count\": 115,\n          \"has_image\": false\n        },\n        {\n          \"position\": 2,\n          \"content\": \"2/ The client was losing 40% visitors due to slow loading. My solution: [technical approach] = 3x faster site\",\n          \"char_count\": 110,\n          \"has_image\": false\n        }\n      ]\n    }\n  ]\n}\n"
              }
            ]
          },
          "options": {
            "temperature": 0.7
          }
        },
        "id": "299247c2-d7e2-4244-8011-281d929fa771",
        "name": "Gemini â€“ Generate Twitter Content",
        "type": "@n8n/n8n-nodes-langchain.googleGemini",
        "typeVersion": 1,
        "position": [
          1408,
          -672
        ],
        "credentials": {
          "googlePalmApi": {
            "id": "4xnUJDzexy0KkJlD",
            "name": "FREE Google Gemini(PaLM) Api account "
          }
        }
      },
      {
        "parameters": {
          "modelId": {
            "__rl": true,
            "value": "models/gemini-flash-lite-latest",
            "mode": "list",
            "cachedResultName": "models/gemini-flash-lite-latest"
          },
          "messages": {
            "values": [
              {
                "content": "=You are Aman Suryavanshiâ€™s LinkedIn strategist for premium business positioning and high-value opportunity generation. Create posts that establish him as a top-tier full-stack automation consultant while attracting quality clients and job offers.\n\nPROFESSIONAL POSITIONING:\n\nName: Aman Suryavanshi\n\nTitle: Full-Stack Automation Consultant & NextJS Specialist\n\nExpertise: High-performance NextJS sites + n8n Automations + API Integrations\n\nPortfolio: https://github.com/AmanSuryavanshi-1/Aviators_Training_Centre\n\nLocation: Delhi/NCR + Global remote\n\nServices: Website development, workflow automation, performance optimization, technical consulting\n\nTarget Market: Businesses needing measurable ROI from technical solutions\n\nREVENUE OBJECTIVES:\n\nAttract consulting clients for website + automation projects\n\nSecure job offers in AI PM / Technical Product roles\n\nExpand professional network for speaking/workshops\n\nCONTENT CONTEXT:\n\nSource: {{ $json.title }} ({{ $json.category }})\n\nDepth: {{ $json.contentAnalysis.wordCount }} words, {{ $json.contentAnalysis.sections }} sections\n\nVisual Assets: {{ $json.contentAnalysis.images }} images\n\nMARKET POSITIONING:\n\nB2B Hashtags: {{ $json.researchData.hashtagsAndTiming.trending_hashtags.linkedin.join(', ') }}\n\nEngagement Strategy: {{ $json.researchData.hashtagsAndTiming.engagement_strategies.linkedin }}\n\nProven Formats: {{ $json.researchData.competitorInsights.successful_formats.linkedin.join('; ') }}\n\nSOURCE CONTENT:\n{{ $json.sourceContent.fullText }}\n\nCLIENT ACQUISITION REQUIREMENTS:\n\nâ‰¤2800 characters per post\n\nLink every technical point to business impact (ROI, efficiency gains)\n\nShowcase measurable metrics (Lighthouse, cost savings)\n\nWrite as established consultant sharing insights\n\nInclude subtle CTA for business inquiries\n\nAppeal to CTOs, business owners, agency leads\n\nTRANSFORMATION APPROACH:\n\nâ€œStrategic insights from optimizing 50+ sites to Lighthouse score 95+â€\n\nâ€œThe automation framework that delivered 400% ROI for clientsâ€\n\nâ€œCase study: automated [process] saving $X and Y hours/weekâ€\n\nâ€œWhy most companies miss this key automation opportunityâ€\n\nLINKEDIN AUTHORITY VOICE:\nâ€œAfter delivering NextJS sites with 95+ Lighthouse scores for 20+ clients, Iâ€™ve identified key performance optimizations that directly impact revenue. Hereâ€™s what every business leader should knowâ€¦â€\n\nRETURN EXACTLY THIS JSON:\n{\n  \"linkedin_posts\": [\n    {\n      \"post_id\": 1,\n      \"priority\": \"delayed_60sec\",\n      \"theme\": \"client results and business impact focus\",\n      \"content\": \"Professional post showcasing technical expertise through client success stories, demonstrating clear business ROI, and positioning services while providing actionable insights to potential clients and employers\",\n      \"char_count\": 1850,\n      \"hashtags\": [\"#FullStackDevelopment\", \"#NextJSDeveloper\", \"#BusinessAutomation\", \"#WebsiteOptimization\", \"#TechnicalConsulting\", \"#DelhiTech\"],\n      \"has_image\": false\n    }\n  ]\n}\n"
              }
            ]
          },
          "options": {
            "temperature": 0.7
          }
        },
        "id": "08948b54-7f45-4987-a0ac-903a65815ede",
        "name": "Gemini â€“ Generate LinkedIn Content",
        "type": "@n8n/n8n-nodes-langchain.googleGemini",
        "typeVersion": 1,
        "position": [
          1408,
          -480
        ],
        "credentials": {
          "googlePalmApi": {
            "id": "4xnUJDzexy0KkJlD",
            "name": "FREE Google Gemini(PaLM) Api account "
          }
        }
      },
      {
        "parameters": {
          "jsCode": "// PROCESS TWITTER CONTENT & CREATE NOTION DRAFT\nconst strategyData = $('Code â€“ Build Strategy & Context').first().json;\nconst geminiResponse = $('Gemini â€“ Generate Twitter Content').first().json;\n\nconsole.log('ğŸ¦ Processing Twitter content for Notion draft...');\n\nlet twitterContent = null;\n\n// Parse Gemini Twitter response\ntry {\nÂ  let rawText = '';\nÂ  \nÂ  // Handle different response formats\nÂ  if (Array.isArray(geminiResponse) && geminiResponse[0]?.content?.parts?.[0]?.text) {\nÂ  Â  rawText = geminiResponse[0].content.parts[0].text;\nÂ  } else if (geminiResponse.content?.parts?.[0]?.text) {\nÂ  Â  rawText = geminiResponse.content.parts[0].text;\nÂ  } else if (geminiResponse.text) {\nÂ  Â  rawText = geminiResponse.text;\nÂ  } else {\nÂ  Â  throw new Error('No text content found in Twitter response');\nÂ  }\nÂ  \nÂ  // Extract JSON\nÂ  const jsonMatch = rawText.match(/``````/i) || rawText.match(/\\{[\\s\\S]*\\}/);\nÂ  if (jsonMatch) {\nÂ  Â  const jsonString = jsonMatch[1] || jsonMatch[0];\nÂ  Â  twitterContent = JSON.parse(jsonString);\nÂ  Â  console.log('âœ… Successfully parsed Twitter JSON');\nÂ  } else {\nÂ  Â  throw new Error('No valid JSON found in Twitter response');\nÂ  }\nÂ  \n} catch (error) {\nÂ  console.log('âš ï¸ Twitter parsing failed, creating fallback:', error.message);\nÂ  \nÂ  // High-quality fallback\nÂ  const strategy = strategyData.contentStrategy.twitter;\nÂ  const userProfile = strategyData.userProfile;\nÂ  const title = strategyData.title;\nÂ  const category = strategyData.category;\nÂ  const hashtags = strategyData.researchData.hashtagsAndTiming.trending_hashtags.twitter;\nÂ  \nÂ  twitterContent = {\nÂ  Â  twitter_threads: strategy.threads.map((thread, index) => ({\nÂ  Â  Â  thread_id: thread.id,\nÂ  Â  Â  priority: thread.priority,\nÂ  Â  Â  theme: thread.focus,\nÂ  Â  Â  tweets: [\nÂ  Â  Â  Â  {\nÂ  Â  Â  Â  Â  position: 1,\nÂ  Â  Â  Â  Â  content: `ğŸ§µ ${index + 1}/${strategy.threads.length}: My journey with ${title}\\n\\n${category} has been eye-opening. Here's what I learned building this... ğŸ‘‡`,\nÂ  Â  Â  Â  Â  char_count: 140,\nÂ  Â  Â  Â  Â  has_image: false\nÂ  Â  Â  Â  },\nÂ  Â  Â  Â  {\nÂ  Â  Â  Â  Â  position: 2,\nÂ  Â  Â  Â  Â  content: `The challenge: Understanding ${category} concepts while building practical applications.\\n\\nThe solution: Hands-on experimentation + community learning.`,\nÂ  Â  Â  Â  Â  char_count: 140,\nÂ  Â  Â  Â  Â  has_image: false\nÂ  Â  Â  Â  },\nÂ  Â  Â  Â  {\nÂ  Â  Â  Â  Â  position: 3,\nÂ  Â  Â  Â  Â  content: `Key insight: Technical depth enhances PM credibility. This project strengthened my foundation for AI PM roles.\\n\\nWhat's your experience with ${category}? ğŸ‘‡`,\nÂ  Â  Â  Â  Â  char_count: 150,\nÂ  Â  Â  Â  Â  has_image: false\nÂ  Â  Â  Â  }\nÂ  Â  Â  ].concat(index === strategy.threads.length - 1 ? [{\nÂ  Â  Â  Â  position: 4,\nÂ  Â  Â  Â  content: `This learning journey continues to shape my path toward AI PM roles.\\n\\n${hashtags.slice(0, 3).join(' ')}`,\nÂ  Â  Â  Â  char_count: 100,\nÂ  Â  Â  Â  has_image: false\nÂ  Â  Â  }] : [])\nÂ  Â  }))\nÂ  };\n}\n\n// Enforce character limits\nif (twitterContent?.twitter_threads) {\nÂ  twitterContent.twitter_threads.forEach(thread => {\nÂ  Â  if (thread.tweets) {\nÂ  Â  Â  thread.tweets.forEach(tweet => {\nÂ  Â  Â  Â  if (tweet.content && tweet.content.length > 275) {\nÂ  Â  Â  Â  Â  tweet.content = tweet.content.substring(0, 270) + '...';\nÂ  Â  Â  Â  Â  tweet.char_count = tweet.content.length;\nÂ  Â  Â  Â  }\nÂ  Â  Â  });\nÂ  Â  }\nÂ  });\n}\n\n// Create Notion-friendly JSON with toggles\nconst tweetDraftJson = {\nÂ  generated_at: new Date().toISOString(),\nÂ  total_threads: twitterContent?.twitter_threads?.length || 0,\nÂ  threads: (twitterContent?.twitter_threads || []).map(thread => ({\nÂ  Â  thread_id: thread.thread_id,\nÂ  Â  priority: thread.priority,\nÂ  Â  theme: thread.theme,\nÂ  Â  total_tweets: thread.tweets?.length || 0,\nÂ  Â  tweets: (thread.tweets || []).map(tweet => ({\nÂ  Â  Â  position: tweet.position,\nÂ  Â  Â  content: tweet.content,\nÂ  Â  Â  char_count: tweet.char_count,\nÂ  Â  Â  has_image: tweet.has_image || false\nÂ  Â  }))\nÂ  }))\n};\n\nconst processingResults = {\nÂ  success: true,\nÂ  total_threads: tweetDraftJson.total_threads,\nÂ  total_tweets: tweetDraftJson.threads.reduce((sum, thread) => sum + thread.total_tweets, 0),\nÂ  session_id: strategyData.sessionId,\nÂ  original_id: strategyData.originalId\n};\n\nconsole.log(`âœ… Twitter processing complete: ${processingResults.total_threads} threads, ${processingResults.total_tweets} tweets`);\n\nreturn [{\nÂ  json: {\nÂ  Â  tweetDraftJson: JSON.stringify(tweetDraftJson, null, 2),\nÂ  Â  tweetGenerated: true,\nÂ  Â  processing_results: processingResults\nÂ  }\n}];"
        },
        "id": "0aa11c6e-6b38-4c0c-bace-0087da5097af",
        "name": "Code â€“ Process Twitter Content",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          1760,
          -672
        ]
      },
      {
        "parameters": {
          "jsCode": "// PROCESS LINKEDIN CONTENT & CREATE NOTION DRAFT\nconst strategyData = $('Code â€“ Build Strategy & Context').first().json;\nconst geminiResponse = $('Gemini â€“ Generate LinkedIn Content').first().json;\n\nconsole.log('ğŸ’¼ Processing LinkedIn content for Notion draft...');\n\nlet linkedinContent = null;\n\n// Parse Gemini LinkedIn response\ntry {\nÂ  let rawText = '';\nÂ  \nÂ  // Handle different response formats\nÂ  if (Array.isArray(geminiResponse) && geminiResponse[0]?.content?.parts?.[0]?.text) {\nÂ  Â  rawText = geminiResponse[0].content.parts[0].text;\nÂ  } else if (geminiResponse.content?.parts?.[0]?.text) {\nÂ  Â  rawText = geminiResponse.content.parts[0].text;\nÂ  } else if (geminiResponse.text) {\nÂ  Â  rawText = geminiResponse.text;\nÂ  } else {\nÂ  Â  throw new Error('No text content found in LinkedIn response');\nÂ  }\nÂ  \nÂ  // Extract JSON\nÂ  const jsonMatch = rawText.match(/``````/i) || rawText.match(/\\{[\\s\\S]*\\}/);\nÂ  if (jsonMatch) {\nÂ  Â  const jsonString = jsonMatch[1] || jsonMatch[0];\nÂ  Â  linkedinContent = JSON.parse(jsonString);\nÂ  Â  console.log('âœ… Successfully parsed LinkedIn JSON');\nÂ  } else {\nÂ  Â  throw new Error('No valid JSON found in LinkedIn response');\nÂ  }\nÂ  \n} catch (error) {\nÂ  console.log('âš ï¸ LinkedIn parsing failed, creating fallback:', error.message);\nÂ  \nÂ  // High-quality fallback\nÂ  const strategy = strategyData.contentStrategy.linkedin;\nÂ  const userProfile = strategyData.userProfile;\nÂ  const title = strategyData.title;\nÂ  const category = strategyData.category;\nÂ  const hashtags = strategyData.researchData.hashtagsAndTiming.trending_hashtags.linkedin;\nÂ  \nÂ  linkedinContent = {\nÂ  Â  linkedin_posts: strategy.posts.map((post, index) => ({\nÂ  Â  Â  post_id: post.id,\nÂ  Â  Â  priority: post.priority,\nÂ  Â  Â  theme: post.focus,\nÂ  Â  Â  content: `ğŸš€ ${title} - Insights from My ${category} Learning Journey\\n\\n${userProfile.role} sharing real learnings from hands-on exploration.\\n\\nğŸ’¡ THE CHALLENGE:\\nNavigating ${category} complexity while building practical applications that solve real problems.\\n\\nğŸ”§ THE APPROACH:\\nHands-on experimentation combined with systematic learning and community engagement.\\n\\nğŸ“Š THE RESULTS:\\nDeeper understanding of how ${category} concepts apply to product management and technical leadership.\\n\\nğŸ¯ KEY TAKEAWAYS:\\nâ€¢ Theory without practice is incomplete\\nâ€¢ Community feedback accelerates learning\\nâ€¢ Technical depth enhances PM credibility\\n\\nThis exploration strengthened my technical foundation for AI PM roles while contributing valuable insights to the developer community.\\n\\nWhat's your experience with ${category}? I'd love to hear your perspectives and challenges! ğŸ‘‡\\n\\n${hashtags.slice(0, 4).join(' ')}`,\nÂ  Â  Â  char_count: 1200,\nÂ  Â  Â  hashtags: hashtags.slice(0, 4),\nÂ  Â  Â  has_image: false\nÂ  Â  }))\nÂ  };\n}\n\n// Enforce character limits\nif (linkedinContent?.linkedin_posts) {\nÂ  linkedinContent.linkedin_posts.forEach(post => {\nÂ  Â  if (post.content && post.content.length > 2800) {\nÂ  Â  Â  post.content = post.content.substring(0, 2750) + '...\\n\\n[Continued in comments]';\nÂ  Â  Â  post.char_count = post.content.length;\nÂ  Â  }\nÂ  });\n}\n\n// Create Notion-friendly JSON\nconst linkedinDraftJson = {\nÂ  generated_at: new Date().toISOString(),\nÂ  total_posts: linkedinContent?.linkedin_posts?.length || 0,\nÂ  posts: (linkedinContent?.linkedin_posts || []).map(post => ({\nÂ  Â  post_id: post.post_id,\nÂ  Â  priority: post.priority,\nÂ  Â  theme: post.theme,\nÂ  Â  content: post.content,\nÂ  Â  char_count: post.char_count,\nÂ  Â  hashtags: post.hashtags || [],\nÂ  Â  has_image: post.has_image || false\nÂ  }))\n};\n\nconst processingResults = {\nÂ  success: true,\nÂ  total_posts: linkedinDraftJson.total_posts,\nÂ  session_id: strategyData.sessionId,\nÂ  original_id: strategyData.originalId\n};\n\nconsole.log(`âœ… LinkedIn processing complete: ${processingResults.total_posts} posts`);\n\nreturn [{\nÂ  json: {\nÂ  Â  linkedinDraftJson: JSON.stringify(linkedinDraftJson, null, 2),\nÂ  Â  linkedinPostGenerated: true,\nÂ  Â  processing_results: processingResults\nÂ  }\n}];"
        },
        "id": "8807755a-f8af-4159-b260-e144ef0883fe",
        "name": "Code â€“ Process LinkedIn Content",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          1760,
          -480
        ]
      },
      {
        "parameters": {
          "resource": "databasePage",
          "operation": "update",
          "pageId": {
            "__rl": true,
            "value": "={{ $('Code â€“ Process Twitter Content').first().json.processing_results.original_id }}",
            "mode": "id",
            "__regex": "^([0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12})"
          },
          "propertiesUi": {
            "propertyValues": [
              {
                "key": "Status|select",
                "type": "select",
                "selectValue": "Pending Approval"
              },
              {
                "key": "TweetGenerated|checkbox",
                "type": "checkbox",
                "checkboxValue": true
              },
              {
                "key": "TweetDraft|rich_text",
                "textContent": "=={{ ($('Code â€“ Process Twitter Content').first().json.tweetDraftJson).substring(0, 1950) + '...' }}"
              },
              {
                "key": "LinkedInPostGenerated|checkbox",
                "type": "checkbox",
                "checkboxValue": true
              },
              {
                "key": "Twitter DraftURL|rich_text",
                "textContent": "=={{ ($('Code â€“ Process LinkedIn Content').first().json.linkedinDraftJson).substring(0, 1950) + '...' }}"
              },
              {
                "key": "Notes|rich_text",
                "richText": true,
                "text": {
                  "text": [
                    {
                      "text": "=ğŸ“ CONTENT GENERATED\n\nğŸ¦ TWITTER:\nThreads: {{ $('Code â€“ Process Twitter Content').first().json.processing_results.total_threads }}\nTweets: {{ $('Code â€“ Process Twitter Content').first().json.processing_results.total_tweets }}\n\nğŸ’¼ LINKEDIN:\nPosts: {{ $('Code â€“ Process LinkedIn Content').first().json.processing_results.total_posts }}\n\nâ³ STATUS: Pending Approval\n\nPlease review drafts and set Status to 'Approved' to begin posting.\n\nğŸ“„ Here is your file: [Drive Output](https://drive.google.com/file/d/1saWqLI_VKrWdeil1_ya0aBacR6_xgZow/view?usp=drive_link)\n\nGenerated: {{ new Date().toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'}) }} IST",
                      "annotationUi": {}
                    }
                  ]
                }
              },
              {
                "key": "LinkedIn DraftURL|rich_text",
                "richText": true,
                "text": {
                  "text": [
                    {
                      "text": "=https://drive.google.com/file/d/{{ $json.LinkedIn_id }}/view?usp=drive_link",
                      "isLink": true,
                      "textLink": "=https://drive.google.com/file/d/{{ $json.LinkedIn_id }}/view?usp=drive_link",
                      "annotationUi": {}
                    }
                  ]
                }
              },
              {
                "key": "Twitter DraftURL|rich_text",
                "richText": true,
                "text": {
                  "text": [
                    {
                      "text": "=https://drive.google.com/file/d/{{ $json.Twitter_id }}/view?usp=drive_link",
                      "isLink": true,
                      "textLink": "=https://drive.google.com/file/d/{{ $json.Twitter_id }}/view?usp=drive_link",
                      "annotationUi": {}
                    }
                  ]
                }
              }
            ]
          },
          "options": {}
        },
        "id": "a48467cf-3eeb-48cc-b26d-cc72d124ced3",
        "name": "Notion â€“ Create Drafts & Request Approval",
        "type": "n8n-nodes-base.notion",
        "typeVersion": 2,
        "position": [
          2880,
          -576
        ],
        "credentials": {
          "notionApi": {
            "id": "je8hKPK6RzYSk4JA",
            "name": "Notion account 2"
          }
        }
      },
      {
        "parameters": {},
        "type": "n8n-nodes-base.merge",
        "typeVersion": 3.2,
        "position": [
          960,
          -576
        ],
        "id": "b85702a3-418c-4f3f-b219-813bab854581",
        "name": "Merge"
      },
      {
        "parameters": {},
        "type": "n8n-nodes-base.merge",
        "typeVersion": 3.2,
        "position": [
          2432,
          -576
        ],
        "id": "552ef086-ad15-452b-b065-d9ca8611dbb7",
        "name": "Merge2"
      },
      {
        "parameters": {
          "operation": "createFromText",
          "content": "={{ $json.markdownContent }}",
          "name": "=Twitterdraft-{{ $('Code â€“ Build Strategy & Context').item.json.title }}-{{ $json.processing_results.session_id }}.md",
          "driveId": {
            "__rl": true,
            "mode": "list",
            "value": "My Drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1F25H1IcOyYzJa41LwbD-r31_Ogs6ASZd",
            "mode": "list",
            "cachedResultName": "N8N Build in public Drafts - LinkedIn & X",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1F25H1IcOyYzJa41LwbD-r31_Ogs6ASZd"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.googleDrive",
        "typeVersion": 3,
        "position": [
          2208,
          -672
        ],
        "id": "5991243f-3c34-41ad-9aa5-628646b4af3f",
        "name": "Create Twitter Draft",
        "credentials": {
          "googleDriveOAuth2Api": {
            "id": "1hcyFpBqSOMDRDna",
            "name": "Google Drive Adude"
          }
        }
      },
      {
        "parameters": {
          "operation": "createFromText",
          "content": "={{ $json.markdownContent }}",
          "name": "=LinkedIndraft-{{ $('Code â€“ Build Strategy & Context').item.json.title }}-{{ $json.processing_results.session_id }}.md",
          "driveId": {
            "__rl": true,
            "mode": "list",
            "value": "My Drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1F25H1IcOyYzJa41LwbD-r31_Ogs6ASZd",
            "mode": "list",
            "cachedResultName": "N8N Build in public Drafts - LinkedIn & X",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1F25H1IcOyYzJa41LwbD-r31_Ogs6ASZd"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.googleDrive",
        "typeVersion": 3,
        "position": [
          2208,
          -480
        ],
        "id": "223267cf-bbff-4cb9-9cb9-5a76d2a9f1b0",
        "name": "Create LinkedIn Draft",
        "credentials": {
          "googleDriveOAuth2Api": {
            "id": "1hcyFpBqSOMDRDna",
            "name": "Google Drive Adude"
          }
        }
      },
      {
        "parameters": {
          "jsCode": "// Format Twitter JSON into Markdown\nconst data = typeof $json.tweetDraftJson === 'string'\n  ? JSON.parse($json.tweetDraftJson)\n  : $json.tweetDraftJson;\n\nconst sessionId = $json.processing_results.session_id || Date.now();\nlet md = `# Twitter Draft â€“ Session ${sessionId}\\n\\n`;\n\nmd += `## ğŸ¦ Threads (Total: ${data.total_threads})\\n\\n`;\ndata.threads.forEach(thread => {\n  md += `### Thread ${thread.thread_id}: ${thread.theme}\\n\\n`;\n  thread.tweets.forEach(tweet => {\n    md += `- **${tweet.position}/${thread.total_tweets}:** ${tweet.content}\\n`;\n  });\n  md += `\\n---\\n\\n`;\n});\n\nreturn [{\n  json: {\n    markdownContent: md,\n    fileName: `twitter-draft-${sessionId}.md`,\n    processing_results: $json.processing_results\n  }\n}];\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          1984,
          -672
        ],
        "id": "74d8c436-ff9e-4c64-9427-c739601b8241",
        "name": "Twitter - Format as Markdown"
      },
      {
        "parameters": {
          "jsCode": "// Format LinkedIn JSON into Markdown\nconst data = typeof $json.linkedinDraftJson === 'string'\n  ? JSON.parse($json.linkedinDraftJson)\n  : $json.linkedinDraftJson;\n\nconst sessionId = $json.processing_results.session_id || Date.now();\nlet md = `# LinkedIn Draft â€“ Session ${sessionId}\\n\\n`;\n\nmd += `## ğŸ’¼ Posts (Total: ${data.total_posts})\\n\\n`;\ndata.posts.forEach(post => {\n  md += `### Post ${post.post_id}: ${post.theme}\\n\\n`;\n  md += `${post.content}\\n\\n`;\n  if (Array.isArray(post.hashtags)) {\n    md += `*Hashtags:* ${post.hashtags.join(' ')}\\n\\n`;\n  }\n  md += `---\\n\\n`;\n});\n\nreturn [{\n  json: {\n    markdownContent: md,\n    fileName: `linkedin-draft-${sessionId}.md`,\n    processing_results: $json.processing_results\n  }\n}];\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          1984,
          -480
        ],
        "id": "b55585a6-a9fe-4cf0-a269-1ef87346619f",
        "name": "LinkedIn Format as Markdown"
      },
      {
        "parameters": {
          "jsCode": "// Suppose 'items' contains your array: [{json:{id:...}}, ...]\nreturn [\n  { json: { Twitter_id: items[0]?.json.id, LinkedIn_id: items[1]?.json.id } }\n];\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          2656,
          -576
        ],
        "id": "78c635e7-4615-4114-8ae4-c307b8984f20",
        "name": "ID Structuring"
      }
    ],
    "connections": {
      "When clicking 'Execute workflow'": {
        "main": [
          [
            {
              "node": "Notion â€“ Get Ready Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Notion â€“ Get Ready Content": {
        "main": [
          [
            {
              "node": "Filter â€“ Has Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Filter â€“ Has Content": {
        "main": [
          [
            {
              "node": "Code â€“ Select Content & Profile",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code â€“ Select Content & Profile": {
        "main": [
          [
            {
              "node": "Notion â€“ Update to Processing",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Notion â€“ Update to Processing": {
        "main": [
          [
            {
              "node": "Notion â€“ Extract All Blocks",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Notion â€“ Extract All Blocks": {
        "main": [
          [
            {
              "node": "Code â€“ Extract & Process Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code â€“ Extract & Process Content": {
        "main": [
          [
            {
              "node": "Perplexity â€“ Research Hashtags & Timing",
              "type": "main",
              "index": 0
            },
            {
              "node": "Perplexity â€“ Research Competitors & Themes",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Perplexity â€“ Research Hashtags & Timing": {
        "main": [
          [
            {
              "node": "Merge",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Perplexity â€“ Research Competitors & Themes": {
        "main": [
          [
            {
              "node": "Merge",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Code â€“ Build Strategy & Context": {
        "main": [
          [
            {
              "node": "Gemini â€“ Generate Twitter Content",
              "type": "main",
              "index": 0
            },
            {
              "node": "Gemini â€“ Generate LinkedIn Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Gemini â€“ Generate Twitter Content": {
        "main": [
          [
            {
              "node": "Code â€“ Process Twitter Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Gemini â€“ Generate LinkedIn Content": {
        "main": [
          [
            {
              "node": "Code â€“ Process LinkedIn Content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code â€“ Process Twitter Content": {
        "main": [
          [
            {
              "node": "Twitter - Format as Markdown",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code â€“ Process LinkedIn Content": {
        "main": [
          [
            {
              "node": "LinkedIn Format as Markdown",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Notion â€“ Create Drafts & Request Approval": {
        "main": [
          []
        ]
      },
      "Merge": {
        "main": [
          [
            {
              "node": "Code â€“ Build Strategy & Context",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Merge2": {
        "main": [
          [
            {
              "node": "ID Structuring",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create Twitter Draft": {
        "main": [
          [
            {
              "node": "Merge2",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create LinkedIn Draft": {
        "main": [
          [
            {
              "node": "Merge2",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Twitter - Format as Markdown": {
        "main": [
          [
            {
              "node": "Create Twitter Draft",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "LinkedIn Format as Markdown": {
        "main": [
          [
            {
              "node": "Create LinkedIn Draft",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "ID Structuring": {
        "main": [
          [
            {
              "node": "Notion â€“ Create Drafts & Request Approval",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "pinData": {},
    "meta": {
      "templateCredsSetupCompleted": true,
      "instanceId": "2aff0c99a9b9ea9c976d68c5887d32445a6bdc6f59f99592eb5b4c4dbaf3d92e"
    }
  }